## 地图

### 分类

-  **尺度地图：** 每一个地点都可以用坐标表示，比如经纬度地图

-  **拓扑地图：** 每一个地点都用一个点表示，比如地铁图

-  **语义地图：** 每一个地点和道路都会用标签的集合来表示，比如百度地图

其中，在机器人领域中，尺度地图常用于建图（Mapping）、定位（Localization）、同时定位与建图（SLAM）；拓扑地图常用于路径规划（Planning）；语义地图常用于人机交互(Human Robot Interaction)

### 占据栅格地图（Occupany Grid Map）

- 定义

  顾名思义，地图为网格的形式，占据栅格地图也是常用的尺度地图。其中每一个点有两种状态：有障碍物（Occupied 状态，用1表示）和没有障碍物（Free状态，用0表示），我们分别使用 $p(s = 1)$ 和 $p(s = 0)$来表示。对于任何一个点，都有 $p(s=1)+p(s=0) = 1$ 。

两个值表示一个点还是有点多了，在此我们引入**占据率**的概念，用两者的比值来作为点的状态：$Odd(s) = \frac{p(s = 1)}{p(s = 0)} $ 

对于一个点，假设当前的状态是 $Odd(s)=\frac{p(s = 1)}{p(s = 0)}$ ，随后来了一个测量值 $z$ ，我们要将其状态更新为$Odd(s|z) = \frac{p(s=1|z)}{p(s = 0|z)}$ ，该怎么表示这个状态转移的过程呢？

根据贝叶斯公式，我们有
$$
p(s = 1|z) = \frac{p(z|s = 1)p(s = 1)}{p(z)} \\
p(s = 0|z) = \frac{p(z|s = 0)p(s = 0)}{p(z)}
$$
带入得
$$
Odd(s|z) = \frac{p(z|s = 1)}{p(z|s = 0)}Odd(s)
$$
两边取对数得
$$
log\,Odd(s|z) = log\,\frac{p(z|s = 1)}{p(z|s = 0)}+log\,Odd(s)
$$
这样含参数的量只剩 $log\,\frac{p(z|s = 1)}{p(z|s = 0)}$，我们称这个比值为**测量值的模型**，标记为lomeans。测量的模型有两种：$lofree = log\,\frac{p(z=0|s = 1)}{p(z=0|s = 0)}$，$looccu = log\,\frac{p(z=1|s = 1)}{p(z=1|s = 0)}$，代表当传感器认为某个栅格 **occupied** 或 **free** 时，对该栅格概率的置信更新量。且都是**定值**。

也就是说，

- 如果传感器/激光认为栅格被击中（occupied）-> 加上 $looccu$

- 如果栅格没有被击中，则认为空（free）-> 加上 $lofree$ 

### ESDF地图



